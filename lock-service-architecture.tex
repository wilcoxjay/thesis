\begin{tikzpicture}[%
  >=stealth,
  msg/.style={font=\scriptsize\ttfamily},
  every node/.style={font=\scriptsize},
  client/.pic={
    \coordinate (-west) at (3.5,-0.7);
    \draw (0,0) -- (3.5,0) -- (3.5,-1.4) -- (0,-1.4) -- cycle;
    \draw[dotted,thick] (2.3,0) -- (2.3, -1.4);
    \node at (1.75,0.2) {Client};
    \node (op) at (0.75,-0.7) {
      \begin{tabular}{c}
        Other\\local\\processes        
      \end{tabular}
    };
    \node (a) at (2.9,-0.7) {
      Agent
    };
    \begin{scope}[shift={(2.5,-0.7)}, yscale=1.5]
      \draw[->] (-0.5,0.2) node[above=-1mm,shift={(-0.1,0)},msg] {Input} -- (-0.28,0.05) -- (-0.22,0.15) -- (0,0);
    \end{scope}
    \begin{scope}[shift={(2.5,-1.2)}]
      \node[inner sep=0.75mm, draw, fill=white, rectangle callout, rounded corners, callout absolute pointer={(0.05,-0.12)}, msg] (out) at (-0.5,0.2) {Output};
      % 
    \end{scope}
  }]
  \pic (c1) at (0,0) {client};
  \pic (c2) at (0,2.2) {client};
  \node[draw,inner sep=3mm] (s) at ($(c1-west)!0.5!(c2-west) + (2,0)$) {Server};
  \draw[<->] (c1-west) -- node[msg,below,shift={(0.1,-0.1)}] {Message} (s.south west);
  \draw[<->] (c2-west) -- node[msg,above,shift={(0.1,0.1)}] {Message} (s.north west);
\end{tikzpicture}
